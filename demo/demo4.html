<!Doctype html>
<html xmlns=http://www.w3.org/1999/xhtml>

<head>
    <meta http-equiv=Content-Type content="text/html;charset=utf-8">
    <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
    <meta content=always name=referrer>
    <link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
    <title>H.265在线播放器DEMO</title>
    <link rel="stylesheet" href="../dist/goldplay-h265.css">
    <script src="../dist/goldplay-h265-sdk.js"></script>
    <style>
        .play-container {
            width: 300px;
            height: 300px;
            /* background-color: #000; */
            margin: 20px 0 0 100px;
            float: left;
        }

        .inline {
            display: inline-block;
            width: 50px;
        }
    </style>
</head>

<body>
    <div id="PlayerWrapper">
        <h3>H.265 Player <b>多路同时播放</b><em class="demo1" id="Demo1">DEMO</em></h3>
    </div>
    <br clear="all">
    <br>
    <script>
        (function (win, doc) {
            const Config = {
                get basePath () {
                    let path = win.location.origin
                    let pathname = win.location.pathname
                    let demoIdx = pathname.lastIndexOf('/demo/')
                    return path + pathname.substr(0, demoIdx)
                },
                get buildPath () {
                    return this.basePath + '/dist/'
                },
                get libPath () {
                    return this.buildPath + 'lib/'
                },
                get src () {
                    return this.basePath + '/data/video3/playlist.m3u8'
                }
            }
            // 动态生成dom
            for (let a = 0; a < 2; a++) {
                const dom = document.createElement("div");
                dom.className = "play-container"
                dom.id = "play-container" + a;
                document.getElementById("PlayerWrapper").appendChild(dom)
                setTimeout(() => {
                    let el = doc.querySelector('#play-container'+a)
                    let player = new GoldPlay(el, {
                        sourceURL: Config.src,
                        type: 'HLS',
                        libPath: Config.libPath,
                        playBackRate: 1
                    })
                }, 15)
            }
            // player.destroy()
        })(window, document)
    </script>
</body>

</html>